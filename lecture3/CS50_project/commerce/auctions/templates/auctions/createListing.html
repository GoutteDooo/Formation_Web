{% extends "auctions/layout.html" %}
{% load static %}
{% block extrahead %}
    <link href="{% static 'auctions/createListing.css' %}" rel="stylesheet" />
{% endblock %}
{% block body %}
    {% if message %}
        <div class="alert alert-danger">{{ message }}</div>
    {% endif %}
    <h2>Create Listing</h2>
    <div id="listing">
        <form action="{% url 'create_listing' %}" method="post">
            {% csrf_token %}
            <input type="text" name="name" placeholder="Name of article" required>
            <textarea id="description" name="description" placeholder="Description" required></textarea>
            <input type="number" name="initial_price" placeholder="Initial price" required>
            <div class="image-input">
                <label for="picture_url">Image URL (optional):</label>
                <input type="url" id="picture_url" name="picture_url" placeholder="https://example.com/image.jpg">
            </div>
            <div class="image-preview" id="image-preview">
                <img id="preview-image" src="" alt="Preview">
            </div>
            <script>
                document.getElementById('picture_url').addEventListener('input', function(e) {
                    const preview = document.getElementById('preview-image');
                    preview.src = e.target.value;
                });
            </script>
            <select name="category" id="category">
                <option value="" disabled>Select a category</option>
                <option value="books">Books</option>
                <option value="clothes">Clothes</option>
                <option value="electronics">Electronics</option>
                <option value="furniture">Furniture</option>
                <option value="others" selected>Others</option>
            </select>
            <label for="end_at">End at:</label>
            <input type="date" name="end_at" placeholder="End at" value="{{ default_end }}" min="{{ default_end }}" max="2050-12-31" required>
            <button type="submit">Create Listing</button>
        </form>
    </div>

{% endblock %}